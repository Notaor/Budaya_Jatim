<!DOCTYPE html>
<html lang="id" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini Game Wayang Berperang - East Java Culture Hub</title>
  <meta name="description"
    content="Mainkan mini game wayang berperang dengan karakter wayang Jawa Timur yang menarik" />
  <style>
    /* CSS Variables */
    :root {
      --primary: #8B4513;
      --primary-600: #654321;
      --accent: #D2691E;
      --secondary: #CD853F;
      --success: #10B981;
      --background: #FEF6E9;
      --surface: #FFF9F0;
      --text-primary: #1F2937;
      --text-secondary: #6B7280;
      --text-muted: #9CA3AF;
      --border: #E5E7EB;
    }

    /* Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Source Sans Pro', sans-serif;
      background-color: var(--background);
      color: var(--text-primary);
      min-height: 100vh;
    }

    .font-source-sans {
      font-family: 'Source Sans Pro', sans-serif;
    }

    .font-playfair {
      font-family: 'Playfair Display', serif;
    }

    /* Component Styles */
    .cultural-card {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      border: 1px solid var(--border);
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.25s ease;
      border: none;
      cursor: pointer;
    }

    .btn-primary:hover {
      background-color: var(--primary-600);
    }

    .transition-250 {
      transition: all 0.25s ease;
    }

    /* Layout Styles */
    .max-w-6xl {
      max-width: 72rem;
    }

    .max-w-7xl {
      max-width: 80rem;
    }

    .mx-auto {
      margin-left: auto;
      margin-right: auto;
    }

    .px-4 {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    .sm\:px-6 {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }

    .lg\:px-8 {
      padding-left: 2rem;
      padding-right: 2rem;
    }

    .py-12 {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }

    .pt-24 {
      padding-top: 6rem;
    }

    .pb-16 {
      padding-bottom: 4rem;
    }

    .mb-4 {
      margin-bottom: 1rem;
    }

    .mb-6 {
      margin-bottom: 1.5rem;
    }

    .mb-8 {
      margin-bottom: 2rem;
    }

    .mb-12 {
      margin-bottom: 3rem;
    }

    .text-center {
      text-align: center;
    }

    .hidden {
      display: none;
    }

    .flex {
      display: flex;
    }

    .justify-between {
      justify-content: space-between;
    }

    .justify-center {
      justify-content: center;
    }

    .items-center {
      align-items: center;
    }

    .fixed {
      position: fixed;
    }

    .top-0 {
      top: 0;
    }

    .w-full {
      width: 100%;
    }

    .h-16 {
      height: 4rem;
    }

    .h-10 {
      height: 2.5rem;
    }

    .w-10 {
      width: 2.5rem;
    }

    .ml-3 {
      margin-left: 0.75rem;
    }

    .text-xl {
      font-size: 1.25rem;
    }

    .text-2xl {
      font-size: 1.5rem;
    }

    .text-3xl {
      font-size: 1.875rem;
    }

    .text-4xl {
      font-size: 2.25rem;
    }

    .text-5xl {
      font-size: 3rem;
    }

    .text-lg {
      font-size: 1.125rem;
    }

    .font-semibold {
      font-weight: 600;
    }

    .font-bold {
      font-weight: 700;
    }

    .rounded-2xl {
      border-radius: 1rem;
    }

    .rounded-xl {
      border-radius: 0.75rem;
    }

    .rounded-lg {
      border-radius: 0.5rem;
    }

    .rounded-full {
      border-radius: 9999px;
    }

    .p-8 {
      padding: 2rem;
    }

    .p-6 {
      padding: 1.5rem;
    }

    .p-4 {
      padding: 1rem;
    }

    .p-3 {
      padding: 0.75rem;
    }

    .bg-white {
      background-color: white;
    }

    .bg-background {
      background-color: var(--background);
    }

    .bg-surface {
      background-color: var(--surface);
    }

    .bg-primary {
      background-color: var(--primary);
    }

    .bg-accent {
      background-color: var(--accent);
    }

    .bg-secondary {
      background-color: var(--secondary);
    }

    .bg-success {
      background-color: var(--success);
    }

    .bg-border {
      background-color: var(--border);
    }

    .text-text-primary {
      color: var(--text-primary);
    }

    .text-text-secondary {
      color: var(--text-secondary);
    }

    .text-text-muted {
      color: var(--text-muted);
    }

    .text-white {
      color: white;
    }

    .border-b {
      border-bottom-width: 1px;
    }

    .border-border {
      border-color: var(--border);
    }

    .backdrop-blur-sm {
      backdrop-filter: blur(4px);
    }

    .bg-background\/95 {
      background-color: rgba(254, 246, 233, 0.95);
    }

    .z-50 {
      z-index: 50;
    }

    /* Grid Styles */
    .grid {
      display: grid;
    }

    .grid-cols-1 {
      grid-template-columns: repeat(1, minmax(0, 1fr));
    }

    .grid-cols-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .md\:grid-cols-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .md\:grid-cols-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .gap-4 {
      gap: 1rem;
    }

    .gap-6 {
      gap: 1.5rem;
    }

    /* Game Specific Styles */
    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }

    .battlefield {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      max-width: 800px;
      padding: 2rem;
      background-color: var(--surface);
      border-radius: 1rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .character {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .character-image {
      width: 150px;
      height: 200px;
      background-color: var(--background);
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--border);
      position: relative;
      overflow: hidden;
    }

    .character-image svg {
      width: 120px;
      height: 160px;
    }

    .health-bar {
      width: 100%;
      height: 12px;
      background-color: var(--border);
      border-radius: 6px;
      overflow: hidden;
    }

    .health-fill {
      height: 100%;
      background-color: var(--success);
      transition: width 0.3s ease;
    }

    .character-name {
      font-weight: 600;
      font-size: 1.25rem;
    }

    .actions {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
      max-width: 300px;
    }

    .action-btn {
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      border: none;
      text-align: center;
    }

    .attack-btn {
      background-color: var(--accent);
      color: white;
    }

    .attack-btn:hover {
      background-color: #B35917;
    }

    .special-btn {
      background-color: var(--primary);
      color: white;
    }

    .special-btn:hover {
      background-color: var(--primary-600);
    }

    .heal-btn {
      background-color: var(--success);
      color: white;
    }

    .heal-btn:hover {
      background-color: #0DA271;
    }

    .battle-log {
      width: 100%;
      max-width: 800px;
      height: 150px;
      overflow-y: auto;
      padding: 1rem;
      background-color: var(--surface);
      border-radius: 0.5rem;
      border: 1px solid var(--border);
    }

    .log-entry {
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      border-radius: 0.25rem;
      background-color: rgba(139, 69, 19, 0.05);
    }

    .player-log {
      border-left: 3px solid var(--primary);
    }

    .enemy-log {
      border-left: 3px solid var(--accent);
    }

    .game-over {
      text-align: center;
      padding: 2rem;
    }

    .restart-btn {
      margin-top: 1rem;
    }

    /* Responsive Styles */
    @media (min-width: 768px) {
      .md\:text-5xl {
        font-size: 3rem;
      }
      
      .md\:grid-cols-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      
      .md\:grid-cols-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 768px) {
      .battlefield {
        flex-direction: column;
        gap: 2rem;
      }
      
      .actions {
        max-width: 100%;
      }
    }
  </style>
</head>

<body class="font-source-sans bg-background text-text-primary min-h-screen">
  <!-- Navigation -->
  <nav class="fixed top-0 w-full bg-background/95 backdrop-blur-sm border-b border-border z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <svg class="h-10 w-10 text-primary" viewBox="0 0 40 40" fill="currentColor">
            <path d="M20 2L37 12v16L20 38L3 28V12L20 2z" />
            <path d="M20 8L30 14v12L20 32L10 26V14L20 8z" fill="white" />
            <circle cx="20" cy="20" r="6" fill="currentColor" />
          </svg>
          <span class="ml-3 text-xl font-playfair font-semibold text-text-primary">East Java Culture Hub</span>
        </div>
        <a href="#" class="text-primary hover:text-primary-600 font-medium">Kembali ke Beranda</a>
      </div>
    </div>
  </nav>

  <!-- Game Content -->
  <section class="pt-24 pb-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-playfair font-bold text-text-primary mb-4">
          Mini Game Wayang Berperang
        </h1>
        <p class="text-lg text-text-secondary max-w-2xl mx-auto">
          Mainkan game pertarungan wayang dengan karakter-karakter wayang Jawa Timur yang legendaris
        </p>
      </div>

      <!-- Game Container -->
      <div class="cultural-card bg-white rounded-2xl p-8 mb-8">
        <!-- Game Interface -->
        <div id="game-container" class="game-container">
          <!-- Welcome Screen -->
          <div id="welcome-screen" class="text-center py-12">
            <div class="w-32 h-32 bg-accent rounded-full flex items-center justify-center mx-auto mb-6">
              <svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
              </svg>
            </div>
            <h2 class="text-3xl font-playfair font-bold text-text-primary mb-4">Selamat Datang di Mini Game Wayang Berperang!</h2>
            <p class="text-text-secondary mb-6 max-w-2xl mx-auto">
              Pilih karakter wayang favorit Anda dan lawan karakter wayang Jawa Timur lainnya dalam pertarungan seru!
            </p>
            <button id="start-game" class="btn-primary px-8 py-4 text-lg">
              Mulai Game
            </button>
          </div>

          <!-- Character Selection Screen -->
          <div id="character-selection-screen" class="hidden w-full">
            <h2 class="text-2xl font-playfair font-semibold text-text-primary mb-6 text-center">Pilih Karakter Wayang Anda</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
              <div class="cultural-card bg-white rounded-xl p-6 text-center cursor-pointer character-option" data-character="arjuna">
                <div class="w-32 h-32 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-20 h-20 text-white" viewBox="0 0 100 100" fill="currentColor">
                    <path d="M50 10 L90 50 L50 90 L10 50 Z" />
                    <circle cx="50" cy="50" r="20" fill="white" />
                  </svg>
                </div>
                <h3 class="text-xl font-playfair font-semibold text-text-primary mb-2">Arjuna</h3>
                <p class="text-text-secondary mb-3">Pemanah ulung dengan ketepatan tinggi</p>
                <div class="text-sm text-text-muted">
                  <div>Serangan: 8</div>
                  <div>Pertahanan: 6</div>
                  <div>Kesehatan: 100</div>
                </div>
              </div>
              <div class="cultural-card bg-white rounded-xl p-6 text-center cursor-pointer character-option" data-character="bima">
                <div class="w-32 h-32 bg-accent rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-20 h-20 text-white" viewBox="0 0 100 100" fill="currentColor">
                    <rect x="20" y="20" width="60" height="60" rx="10" />
                    <circle cx="35" cy="35" r="5" fill="white" />
                    <circle cx="65" cy="35" r="5" fill="white" />
                    <path d="M35 65 L65 65" stroke="white" stroke-width="5" />
                  </svg>
                </div>
                <h3 class="text-xl font-playfair font-semibold text-text-primary mb-2">Bima</h3>
                <p class="text-text-secondary mb-3">Pendekar kuat dengan serangan dahsyat</p>
                <div class="text-sm text-text-muted">
                  <div>Serangan: 10</div>
                  <div>Pertahanan: 4</div>
                  <div>Kesehatan: 120</div>
                </div>
              </div>
              <div class="cultural-card bg-white rounded-xl p-6 text-center cursor-pointer character-option" data-character="gatotkaca">
                <div class="w-32 h-32 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-20 h-20 text-white" viewBox="0 0 100 100" fill="currentColor">
                    <path d="M50 10 L80 40 L65 55 L80 70 L50 100 L20 70 L35 55 L20 40 Z" />
                  </svg>
                </div>
                <h3 class="text-xl font-playfair font-semibold text-text-primary mb-2">Gatotkaca</h3>
                <p class="text-text-secondary mb-3">Kesatria terbang dengan kemampuan khusus</p>
                <div class="text-sm text-text-muted">
                  <div>Serangan: 7</div>
                  <div>Pertahanan: 8</div>
                  <div>Kesehatan: 110</div>
                </div>
              </div>
            </div>
            <div class="text-center">
              <button id="confirm-character" class="btn-primary px-6 py-3 hidden">
                Konfirmasi Pilihan
              </button>
            </div>
          </div>

          <!-- Battle Screen -->
          <div id="battle-screen" class="hidden w-full">
            <div class="battlefield">
              <!-- Player Character -->
              <div class="character">
                <div class="character-name" id="player-name">Arjuna</div>
                <div class="character-image" id="player-image">
                  <svg viewBox="0 0 100 100" fill="var(--primary)">
                    <path d="M50 10 L90 50 L50 90 L10 50 Z" />
                    <circle cx="50" cy="50" r="20" fill="white" />
                  </svg>
                </div>
                <div class="health-bar">
                  <div class="health-fill" id="player-health" style="width: 100%"></div>
                </div>
                <div id="player-stats" class="text-sm text-text-muted">Kesehatan: 100/100</div>
              </div>

              <!-- VS Indicator -->
              <div class="text-2xl font-bold text-text-primary">VS</div>

              <!-- Enemy Character -->
              <div class="character">
                <div class="character-name" id="enemy-name">Buto Ijo</div>
                <div class="character-image" id="enemy-image">
                  <svg viewBox="0 0 100 100" fill="var(--accent)">
                    <circle cx="50" cy="50" r="40" />
                    <circle cx="35" cy="40" r="5" fill="white" />
                    <circle cx="65" cy="40" r="5" fill="white" />
                    <path d="M40 65 L60 65" stroke="white" stroke-width="5" />
                  </svg>
                </div>
                <div class="health-bar">
                  <div class="health-fill" id="enemy-health" style="width: 100%"></div>
                </div>
                <div id="enemy-stats" class="text-sm text-text-muted">Kesehatan: 100/100</div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="actions">
              <button id="attack-btn" class="action-btn attack-btn">Serang</button>
              <button id="special-btn" class="action-btn special-btn">Serangan Khusus</button>
              <button id="heal-btn" class="action-btn heal-btn">Pulihkan</button>
            </div>

            <!-- Battle Log -->
            <div class="battle-log">
              <div id="battle-log-content">
                <div class="log-entry player-log">Pertarungan dimulai! Pilih aksi Anda.</div>
              </div>
            </div>
          </div>

          <!-- Game Over Screen -->
          <div id="game-over-screen" class="hidden game-over">
            <div class="w-32 h-32 bg-success rounded-full flex items-center justify-center mx-auto mb-6">
              <svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h2 class="text-3xl font-playfair font-bold text-text-primary mb-4" id="game-result-title">Kemenangan!</h2>
            <p class="text-text-secondary mb-2" id="game-result-message">Selamat! Anda berhasil mengalahkan lawan.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <button id="play-again-btn" class="btn-primary px-6 py-3">
                Main Lagi
              </button>
              <a href="#"
                class="bg-white text-text-primary border-2 border-border px-6 py-3 rounded-lg font-medium text-center hover:bg-border transition-250">
                Kembali ke Beranda
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Game Instructions -->
      <div class="cultural-card bg-white rounded-xl p-8">
        <div class="text-center mb-6">
          <h3 class="text-2xl font-playfair font-semibold text-text-primary mb-2">Cara Bermain</h3>
          <p class="text-text-secondary">Pelajari cara bermain game wayang berperang</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-3">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <h4 class="font-semibold text-text-primary">Serang</h4>
            <p class="text-sm text-text-secondary">Lakukan serangan biasa untuk mengurangi kesehatan lawan</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-3">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 10V3L4 14h7v7l9-11h-7z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M17 14V3L8 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <h4 class="font-semibold text-text-primary">Serangan Khusus</h4>
            <p class="text-sm text-text-secondary">Gunakan kemampuan khusus untuk serangan lebih kuat</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-success rounded-full flex items-center justify-center mx-auto mb-3">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </div>
            <h4 class="font-semibold text-text-primary">Pulihkan</h4>
            <p class="text-sm text-text-secondary">Pulihkan kesehatan karakter Anda</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Game Data
    const characters = {
      arjuna: {
        name: "Arjuna",
        health: 100,
        maxHealth: 100,
        attack: 8,
        defense: 6,
        specialAttack: 15,
        specialChance: 0.3,
        healAmount: 20,
        color: "var(--primary)",
        image: `<svg viewBox="0 0 100 100" fill="var(--primary)">
                <path d="M50 10 L90 50 L50 90 L10 50 Z" />
                <circle cx="50" cy="50" r="20" fill="white" />
              </svg>`
      },
      bima: {
        name: "Bima",
        health: 120,
        maxHealth: 120,
        attack: 10,
        defense: 4,
        specialAttack: 20,
        specialChance: 0.25,
        healAmount: 15,
        color: "var(--accent)",
        image: `<svg viewBox="0 0 100 100" fill="var(--accent)">
                <rect x="20" y="20" width="60" height="60" rx="10" />
                <circle cx="35" cy="35" r="5" fill="white" />
                <circle cx="65" cy="35" r="5" fill="white" />
                <path d="M35 65 L65 65" stroke="white" stroke-width="5" />
              </svg>`
      },
      gatotkaca: {
        name: "Gatotkaca",
        health: 110,
        maxHealth: 110,
        attack: 7,
        defense: 8,
        specialAttack: 18,
        specialChance: 0.35,
        healAmount: 25,
        color: "var(--secondary)",
        image: `<svg viewBox="0 0 100 100" fill="var(--secondary)">
                <path d="M50 10 L80 40 L65 55 L80 70 L50 100 L20 70 L35 55 L20 40 Z" />
              </svg>`
      }
    };

    const enemies = {
      butoijo: {
        name: "Buto Ijo",
        health: 100,
        maxHealth: 100,
        attack: 7,
        defense: 5,
        color: "var(--accent)",
        image: `<svg viewBox="0 0 100 100" fill="var(--accent)">
                <circle cx="50" cy="50" r="40" />
                <circle cx="35" cy="40" r="5" fill="white" />
                <circle cx="65" cy="40" r="5" fill="white" />
                <path d="M40 65 L60 65" stroke="white" stroke-width="5" />
              </svg>`
      },
      raksasa: {
        name: "Raksasa",
        health: 120,
        maxHealth: 120,
        attack: 9,
        defense: 3,
        color: "var(--primary)",
        image: `<svg viewBox="0 0 100 100" fill="var(--primary)">
                <rect x="25" y="20" width="50" height="60" rx="10" />
                <circle cx="40" cy="35" r="5" fill="white" />
                <circle cx="60" cy="35" r="5" fill="white" />
                <path d="M45 65 L55 65" stroke="white" stroke-width="5" />
              </svg>`
      },
      dhitya: {
        name: "Dhitya",
        health: 90,
        maxHealth: 90,
        attack: 10,
        defense: 4,
        color: "var(--secondary)",
        image: `<svg viewBox="0 0 100 100" fill="var(--secondary)">
                <ellipse cx="50" cy="50" rx="35" ry="40" />
                <circle cx="40" cy="40" r="5" fill="white" />
                <circle cx="60" cy="40" r="5" fill="white" />
                <path d="M45 65 L55 65" stroke="white" stroke-width="5" />
              </svg>`
      }
    };

    // Game State
    let gameState = {
      player: null,
      enemy: null,
      currentScreen: 'welcome',
      battleLog: []
    };

    // DOM Elements
    const welcomeScreen = document.getElementById('welcome-screen');
    const characterSelectionScreen = document.getElementById('character-selection-screen');
    const battleScreen = document.getElementById('battle-screen');
    const gameOverScreen = document.getElementById('game-over-screen');
    const startGameBtn = document.getElementById('start-game');
    const characterOptions = document.querySelectorAll('.character-option');
    const confirmCharacterBtn = document.getElementById('confirm-character');
    const attackBtn = document.getElementById('attack-btn');
    const specialBtn = document.getElementById('special-btn');
    const healBtn = document.getElementById('heal-btn');
    const playAgainBtn = document.getElementById('play-again-btn');
    const playerNameElement = document.getElementById('player-name');
    const playerImageElement = document.getElementById('player-image');
    const playerHealthElement = document.getElementById('player-health');
    const playerStatsElement = document.getElementById('player-stats');
    const enemyNameElement = document.getElementById('enemy-name');
    const enemyImageElement = document.getElementById('enemy-image');
    const enemyHealthElement = document.getElementById('enemy-health');
    const enemyStatsElement = document.getElementById('enemy-stats');
    const battleLogContent = document.getElementById('battle-log-content');
    const gameResultTitle = document.getElementById('game-result-title');
    const gameResultMessage = document.getElementById('game-result-message');

    // Initialize Game
    function initGame() {
      // Set up event listeners
      startGameBtn.addEventListener('click', showCharacterSelection);
      
      characterOptions.forEach(option => {
        option.addEventListener('click', selectCharacter);
      });
      
      confirmCharacterBtn.addEventListener('click', startBattle);
      
      attackBtn.addEventListener('click', () => performAction('attack'));
      specialBtn.addEventListener('click', () => performAction('special'));
      healBtn.addEventListener('click', () => performAction('heal'));
      
      playAgainBtn.addEventListener('click', resetGame);
    }

    // Show Character Selection Screen
    function showCharacterSelection() {
      welcomeScreen.classList.add('hidden');
      characterSelectionScreen.classList.remove('hidden');
      gameState.currentScreen = 'character-selection';
    }

    // Select Character
    function selectCharacter(event) {
      // Remove selected class from all options
      characterOptions.forEach(option => {
        option.classList.remove('border-2', 'border-primary');
      });
      
      // Add selected class to clicked option
      const selectedOption = event.currentTarget;
      selectedOption.classList.add('border-2', 'border-primary');
      
      // Show confirm button
      confirmCharacterBtn.classList.remove('hidden');
      
      // Store selected character
      const characterId = selectedOption.getAttribute('data-character');
      gameState.player = { ...characters[characterId] };
    }

    // Start Battle
    function startBattle() {
      characterSelectionScreen.classList.add('hidden');
      battleScreen.classList.remove('hidden');
      gameState.currentScreen = 'battle';
      
      // Select random enemy
      const enemyKeys = Object.keys(enemies);
      const randomEnemyKey = enemyKeys[Math.floor(Math.random() * enemyKeys.length)];
      gameState.enemy = { ...enemies[randomEnemyKey] };
      
      // Initialize battle log
      gameState.battleLog = [`Pertarungan dimulai! ${gameState.player.name} vs ${gameState.enemy.name}.`];
      
      // Update UI
      updateBattleUI();
    }

    // Update Battle UI
    function updateBattleUI() {
      // Update player info
      playerNameElement.textContent = gameState.player.name;
      playerImageElement.innerHTML = gameState.player.image;
      playerHealthElement.style.width = `${(gameState.player.health / gameState.player.maxHealth) * 100}%`;
      playerStatsElement.textContent = `Kesehatan: ${gameState.player.health}/${gameState.player.maxHealth}`;
      
      // Update enemy info
      enemyNameElement.textContent = gameState.enemy.name;
      enemyImageElement.innerHTML = gameState.enemy.image;
      enemyHealthElement.style.width = `${(gameState.enemy.health / gameState.enemy.maxHealth) * 100}%`;
      enemyStatsElement.textContent = `Kesehatan: ${gameState.enemy.health}/${gameState.enemy.maxHealth}`;
      
      // Update battle log
      battleLogContent.innerHTML = '';
      gameState.battleLog.forEach(log => {
        const logEntry = document.createElement('div');
        logEntry.className = 'log-entry';
        
        // Determine if it's a player or enemy action
        if (log.includes(gameState.player.name)) {
          logEntry.classList.add('player-log');
        } else if (log.includes(gameState.enemy.name)) {
          logEntry.classList.add('enemy-log');
        }
        
        logEntry.textContent = log;
        battleLogContent.appendChild(logEntry);
      });
      
      // Scroll to bottom of battle log
      battleLogContent.scrollTop = battleLogContent.scrollHeight;
    }

    // Perform Action
    function performAction(action) {
      if (gameState.player.health <= 0 || gameState.enemy.health <= 0) return;
      
      let playerActionMessage = '';
      
      // Player action
      switch (action) {
        case 'attack':
          const playerDamage = calculateDamage(gameState.player.attack, gameState.enemy.defense);
          gameState.enemy.health -= playerDamage;
          playerActionMessage = `${gameState.player.name} menyerang ${gameState.enemy.name} dan menyebabkan ${playerDamage} kerusakan.`;
          break;
          
        case 'special':
          // Check if special attack succeeds
          if (Math.random() < gameState.player.specialChance) {
            const specialDamage = calculateDamage(gameState.player.specialAttack, gameState.enemy.defense);
            gameState.enemy.health -= specialDamage;
            playerActionMessage = `${gameState.player.name} menggunakan serangan khusus dan menyebabkan ${specialDamage} kerusakan!`;
          } else {
            playerActionMessage = `${gameState.player.name} mencoba serangan khusus tetapi gagal!`;
          }
          break;
          
        case 'heal':
          const healAmount = gameState.player.healAmount;
          gameState.player.health = Math.min(gameState.player.health + healAmount, gameState.player.maxHealth);
          playerActionMessage = `${gameState.player.name} memulihkan ${healAmount} kesehatan.`;
          break;
      }
      
      gameState.battleLog.push(playerActionMessage);
      
      // Check if enemy is defeated
      if (gameState.enemy.health <= 0) {
        gameState.enemy.health = 0;
        gameState.battleLog.push(`${gameState.enemy.name} telah dikalahkan! ${gameState.player.name} menang!`);
        updateBattleUI();
        endGame(true);
        return;
      }
      
      // Enemy action (if still alive)
      if (gameState.enemy.health > 0) {
        // Simple AI for enemy
        let enemyAction;
        const random = Math.random();
        
        if (random < 0.6) {
          enemyAction = 'attack';
        } else if (random < 0.9) {
          enemyAction = 'special';
        } else {
          enemyAction = 'heal';
        }
        
        let enemyActionMessage = '';
        
        switch (enemyAction) {
          case 'attack':
            const enemyDamage = calculateDamage(gameState.enemy.attack, gameState.player.defense);
            gameState.player.health -= enemyDamage;
            enemyActionMessage = `${gameState.enemy.name} menyerang ${gameState.player.name} dan menyebabkan ${enemyDamage} kerusakan.`;
            break;
            
          case 'special':
            // Enemy special attack (simplified)
            const specialMultiplier = 1.5;
            const enemySpecialDamage = calculateDamage(gameState.enemy.attack * specialMultiplier, gameState.player.defense);
            gameState.player.health -= enemySpecialDamage;
            enemyActionMessage = `${gameState.enemy.name} menggunakan serangan khusus dan menyebabkan ${enemySpecialDamage} kerusakan!`;
            break;
            
          case 'heal':
            // Enemy heal (simplified)
            const enemyHealAmount = 15;
            gameState.enemy.health = Math.min(gameState.enemy.health + enemyHealAmount, gameState.enemy.maxHealth);
            enemyActionMessage = `${gameState.enemy.name} memulihkan ${enemyHealAmount} kesehatan.`;
            break;
        }
        
        gameState.battleLog.push(enemyActionMessage);
        
        // Check if player is defeated
        if (gameState.player.health <= 0) {
          gameState.player.health = 0;
          gameState.battleLog.push(`${gameState.player.name} telah dikalahkan! ${gameState.enemy.name} menang!`);
          updateBattleUI();
          endGame(false);
          return;
        }
      }
      
      updateBattleUI();
    }

    // Calculate Damage
    function calculateDamage(attack, defense) {
      const baseDamage = attack - (defense * 0.5);
      const variance = baseDamage * 0.2; // 20% variance
      const finalDamage = Math.max(1, Math.floor(baseDamage + (Math.random() * variance * 2 - variance)));
      return finalDamage;
    }

    // End Game
    function endGame(playerWon) {
      battleScreen.classList.add('hidden');
      gameOverScreen.classList.remove('hidden');
      gameState.currentScreen = 'game-over';
      
      if (playerWon) {
        gameResultTitle.textContent = "Kemenangan!";
        gameResultMessage.textContent = `Selamat! ${gameState.player.name} berhasil mengalahkan ${gameState.enemy.name}.`;
      } else {
        gameResultTitle.textContent = "Kekalahan";
        gameResultMessage.textContent = `${gameState.player.name} telah dikalahkan oleh ${gameState.enemy.name}. Coba lagi!`;
      }
    }

    // Reset Game
    function resetGame() {
      gameOverScreen.classList.add('hidden');
      welcomeScreen.classList.remove('hidden');
      gameState.currentScreen = 'welcome';
      gameState.player = null;
      gameState.enemy = null;
      gameState.battleLog = [];
      
      // Reset character selection
      characterOptions.forEach(option => {
        option.classList.remove('border-2', 'border-primary');
      });
      confirmCharacterBtn.classList.add('hidden');
    }

    // Initialize the game when page loads
    document.addEventListener('DOMContentLoaded', initGame);
  </script>
</body>

</html>